{"ast":null,"code":"var _jsxFileName = \"/home/desafree/social333/src/component/PostSummary.js\",\n    _s = $RefreshSig$();\n\nimport { updateDoc, doc } from \"firebase/firestore\";\nimport { useState } from \"react/cjs/react.development\";\nimport { db } from \"../firebaseConfig/firebaseConfig\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PostSummary = _ref => {\n  _s();\n\n  let {\n    post,\n    index\n  } = _ref;\n  console.log(post.id);\n  const [like, setLike] = useState(0);\n  const [unlike, setUnlike] = useState(0);\n\n  function upvote() {\n    const docRef = doc(db, 'posts', post.id);\n    const newUpvote = post.upvote + 1;\n\n    if (like == 0 && unlike == 0) {\n      updateDoc(docRef, {\n        upvote: newUpvote\n      }).then(() => {\n        setLike(1);\n      });\n    } else if (like == 0 && unlike == 1) {\n      updateDoc(docRef, {\n        upvote: newUpvote + 1\n      }).then(() => {\n        setLike(1);\n        setUnlike(0);\n      });\n    }\n\n    const upvoteElement = document.querySelectorAll('.upvote');\n    upvoteElement[index].style.backgroundColor = 'green';\n    const downvoteElement = document.querySelectorAll('.downvote');\n    downvoteElement[index].style.backgroundColor = 'white';\n  }\n\n  function downvote() {\n    const docRef = doc(db, 'posts', post.id);\n    const newUpvote = post.upvote - 1;\n\n    if (like == 0 && unlike == 0) {\n      updateDoc(docRef, {\n        upvote: newUpvote\n      }).then(() => {\n        setUnlike(1);\n      });\n    } else if (like == 1 && unlike == 0) {\n      updateDoc(docRef, {\n        upvote: newUpvote - 1\n      }).then(() => {\n        setLike(0);\n        setUnlike(1);\n      });\n    }\n\n    const upvoteElement = document.querySelectorAll('.upvote');\n    upvoteElement[index].style.backgroundColor = 'white';\n    const downvoteElement = document.querySelectorAll('.downvote');\n    downvoteElement[index].style.backgroundColor = 'red';\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `post/${post.id}`,\n      state: {\n        upvote: like,\n        downvote: unlike\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: post.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n      children: post.time\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n      children: post.upvote\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: upvote,\n      className: \"upvote\",\n      children: \"Upvote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: downvote,\n      className: \"downvote\",\n      children: \"downvote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PostSummary, \"wJH84zuJlcaDyA8FwQdZfqpgGPE=\");\n\n_c = PostSummary;\nexport default PostSummary;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostSummary\");","map":{"version":3,"sources":["/home/desafree/social333/src/component/PostSummary.js"],"names":["updateDoc","doc","useState","db","Link","PostSummary","post","index","console","log","id","like","setLike","unlike","setUnlike","upvote","docRef","newUpvote","then","upvoteElement","document","querySelectorAll","style","backgroundColor","downvoteElement","downvote","title","user","content","time"],"mappings":"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","sourcesContent":["import { updateDoc, doc } from \"firebase/firestore\";\nimport { useState } from \"react/cjs/react.development\";\nimport { db } from \"../firebaseConfig/firebaseConfig\";\nimport { Link } from \"react-router-dom\";\n\nconst PostSummary = ({post,index}) => {\n    console.log(post.id)\n\n    const [like,setLike] = useState(0)\n    const [unlike,setUnlike] = useState(0)\n\n    function upvote() {\n        const docRef = doc(db,'posts',post.id)\n        const newUpvote = post.upvote + 1\n\n        if(like==0 && unlike==0) {\n            updateDoc(docRef,{\n                upvote:newUpvote\n            }).then(()=>{\n                setLike(1)\n            })\n        }\n        else if(like==0 && unlike==1) {\n            updateDoc(docRef,{\n                upvote:newUpvote + 1\n            }).then(()=>{\n                setLike(1)\n                setUnlike(0)\n            })\n        }\n\n        const upvoteElement = document.querySelectorAll('.upvote')\n        upvoteElement[index].style.backgroundColor = 'green'\n        const downvoteElement = document.querySelectorAll('.downvote')\n        downvoteElement[index].style.backgroundColor = 'white'\n\n    }\n\n    function downvote() {\n\n        const docRef = doc(db,'posts',post.id)\n        const newUpvote = post.upvote - 1\n\n        if(like==0 && unlike==0) {\n            updateDoc(docRef,{\n                upvote:newUpvote\n            }).then(()=>{\n                setUnlike(1)\n            })\n        }\n        else if(like==1 && unlike==0) {\n            updateDoc(docRef,{\n                upvote:newUpvote - 1\n            }).then(()=>{\n                setLike(0)\n                setUnlike(1)\n            })\n        }\n\n        const upvoteElement = document.querySelectorAll('.upvote')\n        upvoteElement[index].style.backgroundColor = 'white'\n        const downvoteElement = document.querySelectorAll('.downvote')\n        downvoteElement[index].style.backgroundColor = 'red'\n    }\n\n    return ( \n        <div>\n            <Link to={`post/${post.id}`} state={{upvote:like,downvote:unlike}}>\n                <h2>{post.title}</h2>\n                <p>{post.user}</p>\n            </Link>\n\n            <p>{post.content}</p>\n            <h6>{post.time}</h6>\n            <h6>{post.upvote}</h6>\n            <button onClick={upvote} className=\"upvote\">Upvote</button>\n            <button onClick={downvote} className=\"downvote\">downvote</button>\n        </div>\n     );\n}\n \nexport default PostSummary;"]},"metadata":{},"sourceType":"module"}