{"ast":null,"code":"var _jsxFileName = \"/home/desafree/social333/src/component/PostSummary.js\",\n    _s = $RefreshSig$();\n\nimport { updateDoc, doc } from \"firebase/firestore\";\nimport { useState } from \"react/cjs/react.development\";\nimport { db } from \"../firebaseConfig/firebaseConfig\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PostSummary = _ref => {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  console.log(post.id);\n  const [like, setLike] = useState(0);\n  const [unlike, setUnlike] = useState(0);\n\n  function upvote() {\n    const docRef = doc(db, 'posts', post.id);\n    const newUpvote = post.upvote + 1;\n\n    if (like == 0 && unlike == 0) {\n      updateDoc(docRef, {\n        upvote: newUpvote\n      }).then(() => {\n        setLike(1);\n      });\n    } else if (like == 0 && unlike == 1) {\n      updateDoc(docRef, {\n        upvote: newUpvote + 1\n      }).then(() => {\n        setLike(1);\n        setUnlike(0);\n      });\n    }\n  }\n\n  function downvote() {\n    const docRef = doc(db, 'posts', post.id);\n    const newUpvote = post.upvote - 1;\n\n    if (like == 0 && unlike == 0) {\n      updateDoc(docRef, {\n        upvote: newUpvote\n      }).then(() => {\n        setUnlike(1);\n      });\n    } else if (like == 1 && unlike == 0) {\n      updateDoc(docRef, {\n        upvote: newUpvote - 1\n      }).then(() => {\n        setLike(0);\n        setUnlike(1);\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `post/${post.id}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: post.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n      children: post.time\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n      children: post.upvote\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: upvote,\n      children: \"Upvote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: downvote,\n      children: \"downvote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PostSummary, \"wJH84zuJlcaDyA8FwQdZfqpgGPE=\");\n\n_c = PostSummary;\nexport default PostSummary;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostSummary\");","map":{"version":3,"sources":["/home/desafree/social333/src/component/PostSummary.js"],"names":["updateDoc","doc","useState","db","Link","PostSummary","post","console","log","id","like","setLike","unlike","setUnlike","upvote","docRef","newUpvote","then","downvote","title","user","content","time"],"mappings":"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","sourcesContent":["import { updateDoc, doc } from \"firebase/firestore\";\nimport { useState } from \"react/cjs/react.development\";\nimport { db } from \"../firebaseConfig/firebaseConfig\";\nimport { Link } from \"react-router-dom\";\n\nconst PostSummary = ({post}) => {\n    console.log(post.id)\n\n    const [like,setLike] = useState(0)\n    const [unlike,setUnlike] = useState(0)\n\n    function upvote() {\n        const docRef = doc(db,'posts',post.id)\n        const newUpvote = post.upvote + 1\n\n        if(like==0 && unlike==0) {\n            updateDoc(docRef,{\n                upvote:newUpvote\n            }).then(()=>{\n                setLike(1)\n            })\n        }\n        else if(like==0 && unlike==1) {\n            updateDoc(docRef,{\n                upvote:newUpvote + 1\n            }).then(()=>{\n                setLike(1)\n                setUnlike(0)\n            })\n        }\n\n    }\n\n    function downvote() {\n\n        const docRef = doc(db,'posts',post.id)\n        const newUpvote = post.upvote - 1\n\n        if(like==0 && unlike==0) {\n            updateDoc(docRef,{\n                upvote:newUpvote\n            }).then(()=>{\n                setUnlike(1)\n            })\n        }\n        else if(like==1 && unlike==0) {\n            updateDoc(docRef,{\n                upvote:newUpvote - 1\n            }).then(()=>{\n                setLike(0)\n                setUnlike(1)\n            })\n        }\n    }\n\n    return ( \n        <div>\n            <Link to={`post/${post.id}`}>\n                <h2>{post.title}</h2>\n                <p>{post.user}</p>\n            </Link>\n\n            <p>{post.content}</p>\n            <h6>{post.time}</h6>\n            <h6>{post.upvote}</h6>\n            <button onClick={upvote}>Upvote</button>\n            <button onClick={downvote}>downvote</button>\n        </div>\n     );\n}\n \nexport default PostSummary;"]},"metadata":{},"sourceType":"module"}